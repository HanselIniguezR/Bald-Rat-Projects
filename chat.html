<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bald Rat Cut Projects</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="assets/css/stylesChat.css" />
  <script src="scriptnotificaciones.js"></script>
</head>
<body class="bg-bone">
  <div class="overlay"></div>
  <div class="flex h-screen">
    <!-- Sidebar -->
    <aside id="sidebar" class="bg-bone text-white w-20 min-h-screen flex flex-col transition-all duration-300">
      <nav class="flex-1">
        <ul class="space-y-2 py-4">
          <li><a href="#" id="inicioLink" class="flex items-center px-4 py-2 hover:bg-gray-200"><i class="fas fa-home w-6 icon-dark"></i><span class="icon-dark hidden">Inicio</span></a></li>
          <li><a href="#" id="proyectosLink"class="flex items-center px-4 py-2 hover:bg-gray-200"><i class="fas fa-project-diagram w-6 icon-dark"></i><span class="icon-dark hidden">Proyectos</span></a></li>
          <li><a href="#" id="chatLink" class="flex items-center px-4 py-2 hover:bg-gray-200"><i class="fas fa-comments w-6 icon-dark"></i><span class="icon-dark hidden">Chat y Colaboración</span></a></li>
          <li><a href="#" id="postulacionesLink" class="flex items-center px-4 py-2 hover:bg-gray-200"><i class="fas fa-file-alt w-6 icon-dark"></i><span class="icon-dark hidden">Postulaciones</span></a></li>
          <li><a href="#" id="publicacionesLink" class="flex items-center px-4 py-2 hover:bg-gray-200"><i class="fas fa-newspaper w-6 icon-dark"></i><span class="icon-dark hidden">Publicaciones</span></a></li>
          <li><a href="#" id="evaluacionesLink" class="flex items-center px-4 py-2 hover:bg-gray-200"><i class="fas fa-star w-6 icon-dark"></i><span class="icon-dark hidden">Evaluaciones</span></a></li>
          <li><a href="#" id="adminLink" class="flex items-center px-4 py-2 hover:bg-gray-200"><i class="fas fa-cog w-6 icon-dark"></i><span class="icon-dark hidden">Administración</span></a></li>
        </ul>
      </nav>
      <button id="toggleSidebar" class="p-4 hover:bg-gray-200 icon-dark"><i class="fas fa-bars icon-dark"></i></button>
    </aside>

    <!-- Main Content -->
    <div class="flex-1 flex flex-col">
      <header class="bg-bone shadow-md">
        <div class="flex items-center justify-between px-6 py-4">
          <div class="flex items-center">
            <img src="universidad-de-guadalajara-logo-png_seeklogo-370596.png" alt="Logo" class="header-logo" />
            <h1 class="text-xl font-semibold">Bald Rat Cut Projects</h1>
          </div>
          <div class="flex items-center space-x-4">
            <div class="flex items-center space-x-6">
              <!-- Notifications -->
              <div class="notification-container">
                <div class="notification-icon" onclick="toggleNotifications()">
                    🔔 <span id="notification-count">0</span>
                </div>
                <div id="notification-dropdown" class="notification-dropdown">
                    <h3>Notificaciones</h3>
                    <ul id="notification-list">
                        <li>Cargando notificaciones...</li>
                    </ul>
                </div>
            </div>
            <div class="relative">
              <button id="userButton" class="flex items-center space-x-2 hover:bg-gray-200 rounded-lg p-2">
                <img id="userProfilePic" src="assets/images/default-profile.png" alt="Usuario" class="h-8 w-8 rounded-full object-contain bg-gray-200 p-0.5" />
                <span class="icon-dark" id="username">Usuario</span>
                <i class="fas fa-chevron-down icon-dark"></i>
              </button>
            
              <!-- Dropdown Menu -->
              <div id="dropdownMenu" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-2 z-50">
                <a href="#" id="profileLink" class="block px-4 py-2 text-gray-800 hover:bg-gray-100">Perfil</a>
                <a href="#" id="settingsLink" class="block px-4 py-2 text-gray-800 hover:bg-gray-100">Configuración</a>
                <a href="#" id="logoutLink" class="block px-4 py-2 text-red-600 hover:bg-red-100">Cerrar sesión</a>
              </div>
            </div>            
          </div>
        </div>
      </header>

      <main class="flex-1 p-6 overflow-auto">
        <!-- Contenido Principal -->
        <div id="contenido-principal" class="bg-bone rounded-lg shadow-md p-6 mb-6">
          <h2 class="text-2xl font-semibold mb-4">Contenido Principal</h2>
          <p>El contenido dinámico se cargará aquí según la sección seleccionada.</p>
        </div>

        <section id="chat-colab" class="hidden bg-white rounded-lg shadow-md p-6">
          <h2 class="text-2xl font-semibold mb-4">Chat y Colaboraciones</h2>
        
          <div class="grid grid-cols-1 md:grid-cols-3 gap-6 h-[600px]">
            
            <!-- 🟦 Chat -->
            <div class="col-span-2 flex flex-col">
              
              <!-- 📩 Mensajes (scroll interno visible) -->
              <div id="chatMessages"
                   class="bg-gray-100 p-4 rounded-md text-sm border overflow-y-scroll"
                   style="height: 430px; scroll-behavior: smooth;">
                <p class="text-gray-500">Selecciona un usuario para ver la conversación.</p>
              </div>
        
              <!-- 📝 Input -->
              <div class="flex mt-2">
                <input type="text" id="chatInput"
                       class="flex-1 border rounded-l-md px-4 py-2 text-sm"
                       placeholder="Escribe un mensaje..." />
                <button id="BotonEnviar" onclick="enviarMensaje()"
                        class="bg-blue-600 text-white px-4 py-2 rounded-r-md hover:bg-blue-700 text-sm">
                  Enviar
                </button>
              </div>
            </div>
        
            <!-- 🟩 Usuarios disponibles -->
            <div class="flex flex-col">
              <h3 class="text-lg font-semibold mb-2">Usuarios disponibles</h3>
        
              <select id="receptor" class="w-full border rounded-md p-2 mb-4 text-sm">
                <option value="">-- Selecciona un usuario --</option>
              </select>
        
              <ul id="lista-colaboradores" class="space-y-2 text-sm text-gray-800 overflow-y-auto">
                <!-- Cargado dinámicamente -->
              </ul>
            </div>
        
          </div>
        </section>      

        <section id="evaluaciones" class="hidden bg-white rounded-lg shadow-md p-6">
          <h2 class="text-2xl font-semibold mb-6">Evaluaciones</h2>
        
          <!-- Formulario -->
          <div class="flex flex-col items-center w-full mb-6">
            <!-- Estrellas -->
            <div id="rating" class="flex space-x-2 mb-4 text-3xl text-gray-400 cursor-pointer">
              <i class="fas fa-star text-gray-400" data-value="1" role="button"></i>
              <i class="fas fa-star text-gray-400" data-value="2" role="button"></i>
              <i class="fas fa-star text-gray-400" data-value="3" role="button"></i>
              <i class="fas fa-star text-gray-400" data-value="4" role="button"></i>
              <i class="fas fa-star text-gray-400" data-value="5" role="button"></i>
            </div>
        
            <!-- Comentario -->
            <textarea id="comentario"
              class="w-full max-w-2xl border border-gray-300 rounded-md p-4 mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500"
              rows="4"
              placeholder="Escribe un comentario..."></textarea>
        
            <!-- Botón -->
            <button onclick="enviarEvaluacion()"
              class="bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 transition">
              Enviar Evaluación
            </button>
          </div>
        
          <!-- Grid inferior -->
          <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 w-full">
            
            <!-- Comentarios con scroll (2/3) -->
            <div class="lg:col-span-2 max-h-[400px] overflow-y-auto pr-4 border border-gray-200 rounded-md p-2 bg-gray-50">
              <div id="lista-evaluaciones" class="space-y-4"></div>
        
              <!-- Botón ver más -->
              <div class="mt-4 text-center">
                <button id="ver-mas-btn"
                  onclick="mostrarTodasLasEvaluaciones()"
                  class="text-blue-600 hover:underline hidden">
                  Ver más comentarios
                </button>
              </div>
            </div>
        
            <!-- Video (1/3) -->
            <div class="flex justify-center items-start">
              <video autoplay muted loop
                class="rounded-md shadow-lg w-full object-contain max-h-[400px] pointer-events-none select-none">
                <source src="videohubs/PessiDancing.mp4" type="video/mp4">
                Tu navegador no soporta el video.
              </video>
            </div>
          </div>
        </section>
        

        

        
<section id="publicaciones" class="hidden bg-white rounded-lg shadow-md p-6">
  <h2 class="text-2xl font-semibold mb-6">Publicaciones</h2>

  <!-- Publicaciones visibles para todos -->
  <div id="listaPublicaciones" class="space-y-6 mb-10">
    <!-- Aquí se cargarán las publicaciones -->
    <p class="text-gray-500">No hay publicaciones disponibles.</p>
  </div>

  <!-- Solo visible si es admin -->
  <div id="formularioPublicacion" class="hidden">
    <h3 class="text-xl font-semibold mb-4">Crear Nueva Publicación</h3>
    <form id="crearPublicacionForm" class="flex flex-col space-y-4">
      <input type="text" id="tituloPublicacion" class="border border-gray-300 rounded-md p-3 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Título de la publicación" required />
      <textarea id="descripcionPublicacion" rows="4" class="border border-gray-300 rounded-md p-3 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Descripción o detalles del anuncio..." required></textarea>
      <button type="submit" class="bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700">Publicar</button>
    </form>
  </div>
</section>

<section id="proyectos" class="hidden bg-white rounded-lg shadow-md p-6">
  <h2 class="text-2xl font-semibold mb-6">Proyectos Disponibles</h2>

  <!-- Lista de Proyectos -->
  <div id="listaProyectos" class="space-y-6 mb-10">
    <!-- Aquí se cargarán dinámicamente los proyectos -->
    <p class="text-gray-500">No hay proyectos disponibles.</p>
  </div>

  <!-- Formulario solo para Admins y Profesores -->
  <div id="formularioProyecto" class="hidden">
    <h3 class="text-xl font-semibold mb-4">Crear Nuevo Proyecto</h3>
    <form id="crearProyectoForm" class="flex flex-col space-y-4">
      <input type="text" id="nombreProyecto" class="border border-gray-300 rounded-md p-3 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Nombre del Proyecto" required />
      <textarea id="descripcionProyecto" rows="4" class="border border-gray-300 rounded-md p-3 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Descripción del Proyecto" required></textarea>
      <input type="number" id="cuposProyecto" class="border border-gray-300 rounded-md p-3 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Número de Cupos Disponibles" min="1" required />
      <input type="text" id="imagenProyecto" class="border border-gray-300 rounded-md p-3 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="URL de la Imagen del Proyecto (opcional)" />
      <button type="submit" class="bg-green-600 text-white px-6 py-2 rounded-md hover:bg-green-700">Publicar Proyecto</button>
    </form>
  </div>
</section>

<section id="postulaciones" class="hidden bg-white rounded-lg shadow-md p-6">
  <h2 class="text-2xl font-semibold mb-6">Mis Postulaciones</h2>

  <div id="listaPostulaciones" class="overflow-x-auto">
    <table class="min-w-full bg-white border border-gray-300 rounded-md">
      <thead>
        <tr class="bg-gray-100 text-gray-700">
          <th class="py-3 px-6 border-b">Proyecto</th>
          <th class="py-3 px-6 border-b">Fecha de Postulación</th>
          <th class="py-3 px-6 border-b">Estado</th>
        </tr>
      </thead>
      <tbody id="tablaPostulaciones">
        <!-- Aquí se cargarán las postulaciones -->
        <tr><td class="py-3 px-6 text-center text-gray-500" colspan="3">No has realizado ninguna postulación aún.</td></tr>
      </tbody>
    </table>
  </div>
</section>


        <!-- Secciones adicionales -->
        <section id="administracion" class="hidden bg-white rounded-lg shadow-md p-6"><h2 class="text-2xl font-semibold mb-4">Administración</h2><p>Opciones administrativas y configuración del sistema.</p></section>
      </main>
    </div>
  </div>

  <script src="assets/js/scriptsChat.js"></script>
  <script src="assets/js/navegacionChat.js"></script>
  <script src="assets/js/scriptsEvaluaciones.js"></script>
  <script src="assets/js/scriptsPublicaciones.js"></script>
  <script src="assets/js/scriptsProyectos.js"></script>
  <script src="assets/js/scriptsPostulaciones.js"></script>
  <script src="scripts.js"></script>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const fotoPerfil = localStorage.getItem('foto_perfil');
      const userProfilePic = document.getElementById('userProfilePic');
  
      if (fotoPerfil && userProfilePic) {
        userProfilePic.src = fotoPerfil;
      }
    });
  </script>

<style>
  @keyframes highlight {
      from { background: #fff176; }
      to { background: #ffeb3b; }
  }
  
  @media (max-width: 768px) {
      .notification-container {
          width: 250px;
          right: 10px;
          top: 10px;
      }
  }
  
  .notification-container {
      position: relative;
  }
  
  .notification-icon {
      background: #ff9800;
      color: white;
      padding: 10px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 20px;
      position: relative;
  }
  
  .notification-icon span {
      background: red;
      color: white;
      font-size: 12px;
      border-radius: 50%;
      padding: 2px 6px;
      position: absolute;
      top: -5px;
      right: -5px;
  }
  
  .notification-dropdown {
      display: none;
      position: absolute;
      top: 40px;
      right: 0;
      background: white;
      border: 1px solid #ccc;
      width: 250px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
      padding: 10px;
      z-index: 1000;
  }
  
  .notification-dropdown h3 {
      margin: 0;
      font-size: 16px;
      border-bottom: 1px solid #ccc;
      padding-bottom: 5px;
  }
  
  .notification-dropdown ul {
      list-style: none;
      padding: 0;
      margin: 0;
  }
  
  .notification-dropdown ul li {
      padding: 8px;
      border-bottom: 1px solid #eee;
  }
  
  .notification-dropdown ul li:last-child {
      border-bottom: none;
  }
  
  .hidden {
      display: none;
  }
  </style>

  
</body>
</html>
